\hypertarget{namespace_utility_1_1_intersections}{\section{Utility\-:\-:Intersections Namespace Reference}
\label{namespace_utility_1_1_intersections}\index{Utility\-::\-Intersections@{Utility\-::\-Intersections}}
}


Used to hold the intersection check functions.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{namespace_utility_1_1_intersections_a0235bddb016fe1b1fefd9c2eb004ef0d}{Ray\-Intersects\-Sphere} (\hyperlink{class_utility_1_1_ray}{Ray} mouse\-Ray, glm\-::vec3 body\-Position, float sphere\-Radius)
\begin{DoxyCompactList}\small\item\em Checks for intersection between a ray and a sphere. \end{DoxyCompactList}\item 
bool \hyperlink{namespace_utility_1_1_intersections_a96db5faaa3683901a7f1be805423e618}{Ray\-Intersects\-Ellipsoid} (\hyperlink{class_utility_1_1_ray}{Ray} mouse\-Ray, glm\-::vec3 body\-Position, float sphere\-Radius, glm\-::mat4 deformation\-Mat)
\begin{DoxyCompactList}\small\item\em Checks for intersection between a ray and an ellipsoid. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Used to hold the intersection check functions. 

\subsection{Function Documentation}
\hypertarget{namespace_utility_1_1_intersections_a96db5faaa3683901a7f1be805423e618}{\index{Utility\-::\-Intersections@{Utility\-::\-Intersections}!Ray\-Intersects\-Ellipsoid@{Ray\-Intersects\-Ellipsoid}}
\index{Ray\-Intersects\-Ellipsoid@{Ray\-Intersects\-Ellipsoid}!Utility::Intersections@{Utility\-::\-Intersections}}
\subsubsection[{Ray\-Intersects\-Ellipsoid}]{\setlength{\rightskip}{0pt plus 5cm}Utility\-::\-Intersections\-::\-Ray\-Intersects\-Ellipsoid (
\begin{DoxyParamCaption}
\item[{Ray}]{mouse\-Ray, }
\item[{glm\-::vec3}]{body\-Position, }
\item[{float}]{sphere\-Radius, }
\item[{glm\-::mat4}]{deformation\-Mat}
\end{DoxyParamCaption}
)}}\label{namespace_utility_1_1_intersections_a96db5faaa3683901a7f1be805423e618}


Checks for intersection between a ray and an ellipsoid. 

The solution for this problem is simple. We don't need to make complex computations. Simply put, an ellipsoid is a sphere with applied scaling transformations on it. Therefore we can get the matrix which applied these transformations, deform the ray with it and then pass the deformed ray to the Ray\-Intersects\-Sphere function. \hypertarget{namespace_utility_1_1_intersections_a0235bddb016fe1b1fefd9c2eb004ef0d}{\index{Utility\-::\-Intersections@{Utility\-::\-Intersections}!Ray\-Intersects\-Sphere@{Ray\-Intersects\-Sphere}}
\index{Ray\-Intersects\-Sphere@{Ray\-Intersects\-Sphere}!Utility::Intersections@{Utility\-::\-Intersections}}
\subsubsection[{Ray\-Intersects\-Sphere}]{\setlength{\rightskip}{0pt plus 5cm}Utility\-::\-Intersections\-::\-Ray\-Intersects\-Sphere (
\begin{DoxyParamCaption}
\item[{Ray}]{mouse\-Ray, }
\item[{glm\-::vec3}]{body\-Position, }
\item[{float}]{sphere\-Radius}
\end{DoxyParamCaption}
)}}\label{namespace_utility_1_1_intersections_a0235bddb016fe1b1fefd9c2eb004ef0d}


Checks for intersection between a ray and a sphere. 

To check for intersections we need the sphere equation and the ray equation. So, for point $p$, radius $r$ and position $p_c$ the sphere equation is\-: $(p - p_c) \cdot (p - p_c) - r^2 = 0$

The ray equation based on ray direction $d$, parametrized by $t$ and with origin $o$ is\-: $p = t d + o = 0$

Pluging the ray equation in the sphere equation we now have\-: $(t d + o - p_c) \cdot (t d + o - p_c) - r^2 = 0$

To solve it for $t$ we will need the quadratic formula\-: $t = \left(\frac{-b \pm \sqrt{b^2 - 4ac}}{2a}\right)$
\begin{DoxyItemize}
\item $a = d \cdot d$
\item $b = 2 d \cdot (o - p_c)$
\item $c = (o - p_c) \cdot (o - p_c) - r^2$
\end{DoxyItemize}

If $t \ge 0$ we have intersection, else the ray doesn't intersect with the sphere. 